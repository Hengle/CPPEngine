$(function(){var e=function(e,r,t){if(t){var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var n="; expires="+a.toGMTString()}else var n="";document.cookie=e+"="+r+n+"; domain=."+document.location.host+"; path=/"},r=function(e){var r=e+"=",t=document.cookie.split(";"),a=0;for(a;a<t.length;a++){for(var n=t[a];" "==n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(r))return n.substring(r.length,n.length)}return null},t=function(e){$(".header-user-image, #header-user-image").attr("src",e.avatar_url).attr("alt",e.username),$(".user-menu-name").text(e.name),$(".user-menu-profile-url").attr("href",e.profile_url),e.remember_me&&$("#keep-me-signed-in").attr("value",1).prop("checked",!0)},a=r("engadget_profile"),n=r("engadget_remember_me")||r("engadget_remember_me_staging");if(a){var o=JSON.parse(decodeURIComponent(a));o.avatar_changed?$.get("a/user/profile_avatar?username="+o.username,function(r){o.avatar_url=r.avatar_url,o.avatar_changed=!1,o.remember_me?e("engadget_profile",encodeURIComponent(JSON.stringify(o)),1826):e("engadget_profile",encodeURIComponent(JSON.stringify(o)),!1),t(o)}):t(o),$("#user-actions").show()}else $("#guest-actions").show();!a&&n&&$.get("/logout")});