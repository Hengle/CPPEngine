document.write('<link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-b8c853f42bc1486a246eca98739ff795.css">')
document.write('<div id=\"gist12344186\" class=\"gist\">\n        <div class=\"gist-file\">\n          <div class=\"gist-data gist-syntax\">\n            \n\n\n\n    <div class=\"file-data\">\n      <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines highlight\">\n        <tr>\n          <td class=\"line-numbers\">\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L1\" rel=\"file-di-xquartz-sh-L1\">1<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L2\" rel=\"file-di-xquartz-sh-L2\">2<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L3\" rel=\"file-di-xquartz-sh-L3\">3<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L4\" rel=\"file-di-xquartz-sh-L4\">4<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L5\" rel=\"file-di-xquartz-sh-L5\">5<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L6\" rel=\"file-di-xquartz-sh-L6\">6<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L7\" rel=\"file-di-xquartz-sh-L7\">7<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L8\" rel=\"file-di-xquartz-sh-L8\">8<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L9\" rel=\"file-di-xquartz-sh-L9\">9<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L10\" rel=\"file-di-xquartz-sh-L10\">10<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L11\" rel=\"file-di-xquartz-sh-L11\">11<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L12\" rel=\"file-di-xquartz-sh-L12\">12<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L13\" rel=\"file-di-xquartz-sh-L13\">13<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L14\" rel=\"file-di-xquartz-sh-L14\">14<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L15\" rel=\"file-di-xquartz-sh-L15\">15<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L16\" rel=\"file-di-xquartz-sh-L16\">16<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L17\" rel=\"file-di-xquartz-sh-L17\">17<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L18\" rel=\"file-di-xquartz-sh-L18\">18<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L19\" rel=\"file-di-xquartz-sh-L19\">19<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L20\" rel=\"file-di-xquartz-sh-L20\">20<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L21\" rel=\"file-di-xquartz-sh-L21\">21<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L22\" rel=\"file-di-xquartz-sh-L22\">22<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L23\" rel=\"file-di-xquartz-sh-L23\">23<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L24\" rel=\"file-di-xquartz-sh-L24\">24<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L25\" rel=\"file-di-xquartz-sh-L25\">25<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L26\" rel=\"file-di-xquartz-sh-L26\">26<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L27\" rel=\"file-di-xquartz-sh-L27\">27<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L28\" rel=\"file-di-xquartz-sh-L28\">28<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L29\" rel=\"file-di-xquartz-sh-L29\">29<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L30\" rel=\"file-di-xquartz-sh-L30\">30<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L31\" rel=\"file-di-xquartz-sh-L31\">31<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L32\" rel=\"file-di-xquartz-sh-L32\">32<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L33\" rel=\"file-di-xquartz-sh-L33\">33<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L34\" rel=\"file-di-xquartz-sh-L34\">34<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L35\" rel=\"file-di-xquartz-sh-L35\">35<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L36\" rel=\"file-di-xquartz-sh-L36\">36<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L37\" rel=\"file-di-xquartz-sh-L37\">37<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L38\" rel=\"file-di-xquartz-sh-L38\">38<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L39\" rel=\"file-di-xquartz-sh-L39\">39<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L40\" rel=\"file-di-xquartz-sh-L40\">40<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L41\" rel=\"file-di-xquartz-sh-L41\">41<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L42\" rel=\"file-di-xquartz-sh-L42\">42<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L43\" rel=\"file-di-xquartz-sh-L43\">43<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L44\" rel=\"file-di-xquartz-sh-L44\">44<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L45\" rel=\"file-di-xquartz-sh-L45\">45<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L46\" rel=\"file-di-xquartz-sh-L46\">46<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L47\" rel=\"file-di-xquartz-sh-L47\">47<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L48\" rel=\"file-di-xquartz-sh-L48\">48<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L49\" rel=\"file-di-xquartz-sh-L49\">49<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L50\" rel=\"file-di-xquartz-sh-L50\">50<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L51\" rel=\"file-di-xquartz-sh-L51\">51<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L52\" rel=\"file-di-xquartz-sh-L52\">52<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L53\" rel=\"file-di-xquartz-sh-L53\">53<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L54\" rel=\"file-di-xquartz-sh-L54\">54<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L55\" rel=\"file-di-xquartz-sh-L55\">55<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L56\" rel=\"file-di-xquartz-sh-L56\">56<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L57\" rel=\"file-di-xquartz-sh-L57\">57<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L58\" rel=\"file-di-xquartz-sh-L58\">58<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L59\" rel=\"file-di-xquartz-sh-L59\">59<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L60\" rel=\"file-di-xquartz-sh-L60\">60<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L61\" rel=\"file-di-xquartz-sh-L61\">61<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L62\" rel=\"file-di-xquartz-sh-L62\">62<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L63\" rel=\"file-di-xquartz-sh-L63\">63<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L64\" rel=\"file-di-xquartz-sh-L64\">64<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L65\" rel=\"file-di-xquartz-sh-L65\">65<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L66\" rel=\"file-di-xquartz-sh-L66\">66<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L67\" rel=\"file-di-xquartz-sh-L67\">67<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L68\" rel=\"file-di-xquartz-sh-L68\">68<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L69\" rel=\"file-di-xquartz-sh-L69\">69<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L70\" rel=\"file-di-xquartz-sh-L70\">70<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L71\" rel=\"file-di-xquartz-sh-L71\">71<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L72\" rel=\"file-di-xquartz-sh-L72\">72<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L73\" rel=\"file-di-xquartz-sh-L73\">73<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L74\" rel=\"file-di-xquartz-sh-L74\">74<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L75\" rel=\"file-di-xquartz-sh-L75\">75<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L76\" rel=\"file-di-xquartz-sh-L76\">76<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L77\" rel=\"file-di-xquartz-sh-L77\">77<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L78\" rel=\"file-di-xquartz-sh-L78\">78<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L79\" rel=\"file-di-xquartz-sh-L79\">79<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L80\" rel=\"file-di-xquartz-sh-L80\">80<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L81\" rel=\"file-di-xquartz-sh-L81\">81<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L82\" rel=\"file-di-xquartz-sh-L82\">82<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L83\" rel=\"file-di-xquartz-sh-L83\">83<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L84\" rel=\"file-di-xquartz-sh-L84\">84<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L85\" rel=\"file-di-xquartz-sh-L85\">85<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L86\" rel=\"file-di-xquartz-sh-L86\">86<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L87\" rel=\"file-di-xquartz-sh-L87\">87<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L88\" rel=\"file-di-xquartz-sh-L88\">88<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L89\" rel=\"file-di-xquartz-sh-L89\">89<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L90\" rel=\"file-di-xquartz-sh-L90\">90<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L91\" rel=\"file-di-xquartz-sh-L91\">91<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L92\" rel=\"file-di-xquartz-sh-L92\">92<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L93\" rel=\"file-di-xquartz-sh-L93\">93<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L94\" rel=\"file-di-xquartz-sh-L94\">94<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L95\" rel=\"file-di-xquartz-sh-L95\">95<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L96\" rel=\"file-di-xquartz-sh-L96\">96<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L97\" rel=\"file-di-xquartz-sh-L97\">97<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L98\" rel=\"file-di-xquartz-sh-L98\">98<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L99\" rel=\"file-di-xquartz-sh-L99\">99<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L100\" rel=\"file-di-xquartz-sh-L100\">100<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L101\" rel=\"file-di-xquartz-sh-L101\">101<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L102\" rel=\"file-di-xquartz-sh-L102\">102<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L103\" rel=\"file-di-xquartz-sh-L103\">103<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L104\" rel=\"file-di-xquartz-sh-L104\">104<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L105\" rel=\"file-di-xquartz-sh-L105\">105<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L106\" rel=\"file-di-xquartz-sh-L106\">106<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L107\" rel=\"file-di-xquartz-sh-L107\">107<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L108\" rel=\"file-di-xquartz-sh-L108\">108<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L109\" rel=\"file-di-xquartz-sh-L109\">109<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L110\" rel=\"file-di-xquartz-sh-L110\">110<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L111\" rel=\"file-di-xquartz-sh-L111\">111<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L112\" rel=\"file-di-xquartz-sh-L112\">112<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L113\" rel=\"file-di-xquartz-sh-L113\">113<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L114\" rel=\"file-di-xquartz-sh-L114\">114<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L115\" rel=\"file-di-xquartz-sh-L115\">115<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L116\" rel=\"file-di-xquartz-sh-L116\">116<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L117\" rel=\"file-di-xquartz-sh-L117\">117<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L118\" rel=\"file-di-xquartz-sh-L118\">118<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L119\" rel=\"file-di-xquartz-sh-L119\">119<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L120\" rel=\"file-di-xquartz-sh-L120\">120<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L121\" rel=\"file-di-xquartz-sh-L121\">121<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L122\" rel=\"file-di-xquartz-sh-L122\">122<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L123\" rel=\"file-di-xquartz-sh-L123\">123<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L124\" rel=\"file-di-xquartz-sh-L124\">124<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L125\" rel=\"file-di-xquartz-sh-L125\">125<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L126\" rel=\"file-di-xquartz-sh-L126\">126<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L127\" rel=\"file-di-xquartz-sh-L127\">127<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L128\" rel=\"file-di-xquartz-sh-L128\">128<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L129\" rel=\"file-di-xquartz-sh-L129\">129<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L130\" rel=\"file-di-xquartz-sh-L130\">130<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L131\" rel=\"file-di-xquartz-sh-L131\">131<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L132\" rel=\"file-di-xquartz-sh-L132\">132<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L133\" rel=\"file-di-xquartz-sh-L133\">133<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L134\" rel=\"file-di-xquartz-sh-L134\">134<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L135\" rel=\"file-di-xquartz-sh-L135\">135<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L136\" rel=\"file-di-xquartz-sh-L136\">136<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L137\" rel=\"file-di-xquartz-sh-L137\">137<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L138\" rel=\"file-di-xquartz-sh-L138\">138<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L139\" rel=\"file-di-xquartz-sh-L139\">139<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L140\" rel=\"file-di-xquartz-sh-L140\">140<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L141\" rel=\"file-di-xquartz-sh-L141\">141<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L142\" rel=\"file-di-xquartz-sh-L142\">142<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L143\" rel=\"file-di-xquartz-sh-L143\">143<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L144\" rel=\"file-di-xquartz-sh-L144\">144<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L145\" rel=\"file-di-xquartz-sh-L145\">145<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L146\" rel=\"file-di-xquartz-sh-L146\">146<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L147\" rel=\"file-di-xquartz-sh-L147\">147<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L148\" rel=\"file-di-xquartz-sh-L148\">148<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L149\" rel=\"file-di-xquartz-sh-L149\">149<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L150\" rel=\"file-di-xquartz-sh-L150\">150<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L151\" rel=\"file-di-xquartz-sh-L151\">151<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L152\" rel=\"file-di-xquartz-sh-L152\">152<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L153\" rel=\"file-di-xquartz-sh-L153\">153<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L154\" rel=\"file-di-xquartz-sh-L154\">154<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L155\" rel=\"file-di-xquartz-sh-L155\">155<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L156\" rel=\"file-di-xquartz-sh-L156\">156<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L157\" rel=\"file-di-xquartz-sh-L157\">157<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L158\" rel=\"file-di-xquartz-sh-L158\">158<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L159\" rel=\"file-di-xquartz-sh-L159\">159<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L160\" rel=\"file-di-xquartz-sh-L160\">160<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L161\" rel=\"file-di-xquartz-sh-L161\">161<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L162\" rel=\"file-di-xquartz-sh-L162\">162<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L163\" rel=\"file-di-xquartz-sh-L163\">163<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L164\" rel=\"file-di-xquartz-sh-L164\">164<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L165\" rel=\"file-di-xquartz-sh-L165\">165<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L166\" rel=\"file-di-xquartz-sh-L166\">166<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L167\" rel=\"file-di-xquartz-sh-L167\">167<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L168\" rel=\"file-di-xquartz-sh-L168\">168<\/span>\n            <span class=\"line-number\" id=\"file-di-xquartz-sh-L169\" rel=\"file-di-xquartz-sh-L169\">169<\/span>\n          <\/td>\n          <td class=\"line-data\">\n            <pre class=\"line-pre\"><div class=\"line\" id=\"file-di-xquartz-sh-LC1\"><span class=\"pl-c\">#!/bin/zsh -f<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC2\"><span class=\"pl-c\"># Download and install (or update) Xquartz<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC3\"><span class=\"pl-c\">#<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC4\"><span class=\"pl-c\"># From:	Timothy J. Luoma<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC5\"><span class=\"pl-c\"># Mail:	luomat at gmail dot com<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC6\"><span class=\"pl-c\"># Date:	2014-06-10<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC7\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC8\">NAME=<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$0<\/span>:t:r<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC9\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC10\">APP_PATH=<span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>/Applications/Utilities/XQuartz.app<span class=\"pl-pds\">&#39;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC11\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC12\">	LOCAL_VERSION=<span class=\"pl-s1\"><span class=\"pl-pds\">`<\/span>defaults <span class=\"pl-s3\">read<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">${APP_PATH}<\/span>/Contents/Info.plist<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>CFBundleVersion<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">2&gt;<\/span>/dev/null<span class=\"pl-pds\">`<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC13\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC14\"><span class=\"pl-c\">## In case you need them:<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC15\"><span class=\"pl-c\"># GENERAL_URL=&#39;https://xquartz.macosforge.org/landing/&#39;<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC16\"><span class=\"pl-c\"># DOWNLOAD_URL=&#39;http://xquartz.macosforge.org/trac/wiki/Releases&#39;<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC17\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC18\">UPDATES_URL=<span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>http://xquartz.macosforge.org/downloads/sparkle/release.xml<span class=\"pl-pds\">&#39;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC19\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC20\">	REMOTE_VERSION=<span class=\"pl-s1\"><span class=\"pl-pds\">`<\/span>curl -sL <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$UPDATES_URL<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">|<\/span> awk -F<span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>&quot;<span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>/sparkle:version=/{print $4}<span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-k\">|<\/span> head -1<span class=\"pl-pds\">`<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC21\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC22\">	DOWNLOAD_ACTUAL=<span class=\"pl-s1\"><span class=\"pl-pds\">`<\/span>curl -sL <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$UPDATES_URL<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">|<\/span> tr <span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>&quot;<span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>\\012<span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-k\">|<\/span> egrep <span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>^http.*\\.dmg<span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-k\">|<\/span> head -1<span class=\"pl-pds\">`<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC23\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC24\">		FILENAME=<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$DOWNLOAD_ACTUAL<\/span>:t<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC25\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC26\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC27\">zmodload zsh/datetime\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC28\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC29\">TIME=<span class=\"pl-s1\"><span class=\"pl-pds\">$(<\/span>strftime <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>%Y-%m-%d-at-%H.%M.%S<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$EPOCHSECONDS<\/span><span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-pds\">)<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC30\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC31\">HOST=<span class=\"pl-s1\"><span class=\"pl-pds\">`<\/span>hostname -s<span class=\"pl-pds\">`<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC32\">HOST=<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$HOST<\/span>:l<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC33\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC34\">LOG=<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$HOME<\/span>/Dropbox/logs/<span class=\"pl-vo\">$HOST<\/span>/<span class=\"pl-vo\">$NAME<\/span>/<span class=\"pl-vo\">$TIME<\/span>.txt<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC35\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC36\">[[ <span class=\"pl-k\">-d<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$LOG<\/span>:h<span class=\"pl-pds\">&quot;<\/span><\/span> ]] <span class=\"pl-k\">||<\/span> mkdir -p <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$LOG<\/span>:h<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC37\">[[ <span class=\"pl-k\">-e<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$LOG<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ]]   <span class=\"pl-k\">||<\/span> touch <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$LOG<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC38\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC39\"><span class=\"pl-st\">function<\/span> <span class=\"pl-en\">timestamp<\/span> { strftime <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>%Y-%m-%d at %H:%M:%S<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$EPOCHSECONDS<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> }\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC40\"><span class=\"pl-st\">function<\/span> <span class=\"pl-en\">log<\/span> { 	<span class=\"pl-s3\">echo<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$NAME<\/span> [<span class=\"pl-s1\"><span class=\"pl-pds\">`<\/span>timestamp<span class=\"pl-pds\">`<\/span><\/span>]: <span class=\"pl-vo\">$@<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">|<\/span> tee -a <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$LOG<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> }\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC41\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC42\"><span class=\"pl-st\">function<\/span> <span class=\"pl-en\">msg<\/span> {\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC43\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC44\">	MSG=<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$@<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC45\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC46\">	log <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$MSG<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC47\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC48\">	<span class=\"pl-k\">if<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">((<\/span> $<span class=\"pl-k\">+<\/span>commands[growlnotify] <span class=\"pl-pds\">))<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC49\">	<span class=\"pl-k\">then<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC50\">		growlnotify --appIcon <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>XQuartz<span class=\"pl-pds\">&quot;<\/span><\/span> --identifier <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>install-update-xquartz<span class=\"pl-pds\">&quot;<\/span><\/span> --message <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$@<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> --title <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>Install/Update XQuartz<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC51\">	<span class=\"pl-k\">fi<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC52\">}\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC53\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC54\"><span class=\"pl-st\">function<\/span> <span class=\"pl-en\">msgs<\/span> {\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC55\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC56\">	MSG=<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$@<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC57\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC58\">	log <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$MSG<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC59\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC60\">	<span class=\"pl-k\">if<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">((<\/span> $<span class=\"pl-k\">+<\/span>commands[growlnotify] <span class=\"pl-pds\">))<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC61\">	<span class=\"pl-k\">then<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC62\">		growlnotify --sticky --appIcon <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>XQuartz<span class=\"pl-pds\">&quot;<\/span><\/span> --identifier <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>install-update-xquartz<span class=\"pl-pds\">&quot;<\/span><\/span> --message <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$@<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> --title <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>Install/Update XQuartz<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC63\">	<span class=\"pl-k\">fi<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC64\">}\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC65\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC66\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC67\"><span class=\"pl-k\">if<\/span> [ <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$REMOTE_VERSION<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> = <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ]\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC68\"><span class=\"pl-k\">then<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC69\">	log <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>REMOTE_VERSION is empty, cannot continue<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC70\">	<span class=\"pl-s3\">exit<\/span> 0\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC71\"><span class=\"pl-k\">fi<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC72\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC73\"><span class=\"pl-k\">if<\/span> [ <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$DOWNLOAD_ACTUAL<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> = <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ]\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC74\"><span class=\"pl-k\">then<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC75\">	log <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>DOWNLOAD_ACTUAL is empty, cannot continue<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC76\">	<span class=\"pl-s3\">exit<\/span> 0\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC77\"><span class=\"pl-k\">fi<\/span>	\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC78\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC79\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC80\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC81\"><span class=\"pl-k\">if<\/span> [ <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$LOCAL_VERSION<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> = <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$REMOTE_VERSION<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ]\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC82\"><span class=\"pl-k\">then<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC83\">		log <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$APP_PATH<\/span>:t is up-to-date (<span class=\"pl-vo\">$LOCAL_VERSION<\/span> ~ <span class=\"pl-vo\">$REMOTE_VERSION<\/span>)<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC84\">		<span class=\"pl-s3\">exit<\/span> 0\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC85\"><span class=\"pl-k\">else<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC86\">			<span class=\"pl-c\"># Update Needed<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC87\">		msgs <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$APP_PATH<\/span>:t is outdated (<span class=\"pl-vo\">$LOCAL_VERSION<\/span> vs <span class=\"pl-vo\">$REMOTE_VERSION<\/span>)<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC88\"><span class=\"pl-k\">fi<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC89\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC90\"><span class=\"pl-s3\">cd<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$HOME<\/span>/Downloads<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">||<\/span> <span class=\"pl-s3\">cd<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$HOME<\/span>/Desktop<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">||<\/span> <span class=\"pl-s3\">cd<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$HOME<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">||<\/span> <span class=\"pl-s3\">cd<\/span> /tmp\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC91\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC92\">REMOTE_SIZE=<span class=\"pl-s1\"><span class=\"pl-pds\">`<\/span>curl -sL --head <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">${DOWNLOAD_ACTUAL}<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">|<\/span> awk -F<span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span> <span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>/Content-Length/{print $NF}<span class=\"pl-pds\">&#39;<\/span><\/span><span class=\"pl-k\">|<\/span> tr -dc <span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>[0-9]<span class=\"pl-pds\">&#39;<\/span><\/span><span class=\"pl-pds\">`<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC93\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC94\">zmodload zsh/stat\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC95\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC96\"><span class=\"pl-st\">function<\/span> <span class=\"pl-en\">get_local_size<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC97\">{\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC98\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC99\">	LOCAL_SIZE=<span class=\"pl-s1\"><span class=\"pl-pds\">$(<\/span>zstat -L +size <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$FILENAME<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">2&gt;<\/span>/dev/null<span class=\"pl-pds\">)<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC100\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC101\">}\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC102\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC103\">get_local_size\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC104\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC105\"><span class=\"pl-k\">while<\/span> [ <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$LOCAL_SIZE<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> -lt <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$REMOTE_SIZE<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ]\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC106\"><span class=\"pl-k\">do<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC107\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC108\">	curl -C - --max-<span class=\"pl-k\">time<\/span> 3600 --fail --location --referer <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>;auto<span class=\"pl-pds\">&quot;<\/span><\/span> --progress-bar --remote-name <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">${DOWNLOAD_ACTUAL}<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC109\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC110\">	get_local_size\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC111\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC112\"><span class=\"pl-k\">done<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC113\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC114\">MNTPNT=<span class=\"pl-s1\"><span class=\"pl-pds\">$(<\/span><span class=\"pl-s3\">echo<\/span> -n <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>Y<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">|<\/span> hdid -plist <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$FILENAME<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">2&gt;<\/span>/dev/null <span class=\"pl-k\">|<\/span> fgrep -A 1 <span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>&lt;key&gt;mount-point&lt;/key&gt;<span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-k\">|<\/span> tail -1 <span class=\"pl-k\">|<\/span> sed <span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>s#&lt;/string&gt;.*##g ; s#.*&lt;string&gt;##g<span class=\"pl-pds\">&#39;<\/span><\/span><span class=\"pl-pds\">)<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC115\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC116\"><span class=\"pl-k\">if<\/span> [ <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$MNTPNT<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> = <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ]\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC117\"><span class=\"pl-k\">then<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC118\">	msgs <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>MNTPNT is empty<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC119\">	<span class=\"pl-s3\">exit<\/span> 1\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC120\"><span class=\"pl-k\">fi<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC121\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC122\">PKG=<span class=\"pl-s1\"><span class=\"pl-pds\">`<\/span>find <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$MNTPNT<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> -maxdepth 1 -iname <span class=\"pl-cce\">\\*<\/span>.pkg<span class=\"pl-pds\">`<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC123\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC124\"><span class=\"pl-k\">if<\/span> [ <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$PKG<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> = <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ]\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC125\"><span class=\"pl-k\">then<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC126\">	msgs <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>PKG is empty<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC127\">	<span class=\"pl-s3\">exit<\/span> 1\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC128\"><span class=\"pl-k\">fi<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC129\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC130\">msgs <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>Installing <span class=\"pl-vo\">$PKG<\/span> (this may take awhile...)<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC131\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC132\">sudo installer -verboseR -pkg <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$PKG<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> -target / -lang en <span class=\"pl-k\">2&gt;&amp;1<\/span> <span class=\"pl-k\">|<\/span> tee -a <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$LOG<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC133\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC134\">EXIT=<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$?<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC135\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC136\"><span class=\"pl-k\">if<\/span> [ <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$EXIT<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> = <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>0<span class=\"pl-pds\">&quot;<\/span><\/span> ]\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC137\"><span class=\"pl-k\">then<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC138\">	msg <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>Successfully installed XQuartz.app version <span class=\"pl-vo\">$REMOTE_VERSION<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC139\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC140\">	COUNT=<span class=\"pl-s1\"><span class=\"pl-pds\">&#39;<\/span>0<span class=\"pl-pds\">&#39;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC141\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC142\">	<span class=\"pl-k\">while<\/span> [ -e <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$MNTPNT<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ]\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC143\">	<span class=\"pl-k\">do<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC144\">		<span class=\"pl-s1\"><span class=\"pl-pds\">((<\/span>COUNT<span class=\"pl-k\">++<\/span><span class=\"pl-pds\">))<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC145\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC146\">		<span class=\"pl-k\">if<\/span> [ <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$COUNT<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> -gt <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>10<span class=\"pl-pds\">&quot;<\/span><\/span> ]\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC147\">		<span class=\"pl-k\">then<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC148\">			<span class=\"pl-s3\">exit<\/span> 0\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC149\">		<span class=\"pl-k\">fi<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC150\">			<span class=\"pl-c\"># unmount the DMG<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC151\">		diskutil unmount <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$MNTPNT<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">||<\/span> sleep 5\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC152\">	<span class=\"pl-k\">done<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC153\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC154\">	<span class=\"pl-k\">if<\/span> [ <span class=\"pl-k\">!<\/span> -e <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-vo\">$MNTPNT<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ]\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC155\">	<span class=\"pl-k\">then<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC156\">		msg <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>Unmounted <span class=\"pl-vo\">$MNTPNT<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC157\">	<span class=\"pl-k\">fi<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC158\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC159\">	<span class=\"pl-s3\">exit<\/span> 0\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC160\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC161\"><span class=\"pl-k\">else<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC162\">	msg <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>FAILED to install XQuartz.app version <span class=\"pl-vo\">$REMOTE_VERSION<\/span> (exit = <span class=\"pl-vo\">$EXIT<\/span>)<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC163\">	<span class=\"pl-s3\">exit<\/span> 1\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC164\"><span class=\"pl-k\">fi<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC165\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC166\">&nbsp;\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC167\"><span class=\"pl-s3\">exit<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC168\"><span class=\"pl-c\">#<\/span>\n<\/div><div class=\"line\" id=\"file-di-xquartz-sh-LC169\"><span class=\"pl-c\">#EOF<\/span>\n<\/div><\/pre>\n          <\/td>\n        <\/tr>\n      <\/table>\n    <\/div>\n\n          <\/div>\n          <div class=\"gist-meta\">\n            <a href=\"https://gist.github.com/tjluoma/df58b0362b28162da813/raw/di-xquartz.sh\" style=\"float:right\">view raw<\/a>\n            <a href=\"https://gist.github.com/tjluoma/df58b0362b28162da813#file-di-xquartz-sh\">di-xquartz.sh<\/a>\n            hosted with &#10084; by <a href=\"https://github.com\">GitHub<\/a>\n          <\/div>\n        <\/div>\n<\/div>\n')
